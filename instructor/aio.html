<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Introduction to QMI: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css">
<script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../favicons/incubator/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicons/incubator/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicons/incubator/favicon-16x16.png">
<link rel="manifest" href="../favicons/incubator/site.webmanifest">
<link rel="mask-icon" href="../favicons/incubator/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="QMI course" src="../assets/images/incubator-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='../aio.html';">Learner View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="QMI course" src="../assets/images/incubator-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Introduction to QMI
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Introduction to QMI
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<hr>
<li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Introduction to QMI
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../aio.html">Learner View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="what_is_qmi.html">1. What is QMI?</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="hello_world.html">2. 'Hello World'</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="one_instrument_control.html">3. Controlling an instrument</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="qmi_configuration.html">4. Configuring and logging</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="accessing_a_remote_instrument.html">5. Accessing an instrument remotely</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="tasks_and_service.html">6. Create a task and a 'service'</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="open-source_vs_internal.html">7. Open-source vs internal code</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="mypy.html">8. Good coding practises: MyPy</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="releasing_code.html">9. Releasing and versioning of QMI code</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr>
<li><a class="dropdown-item" href="reference.html">Reference</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-what_is_qmi"><p>Content from <a href="what_is_qmi.html">What is QMI?</a></p>
<hr>
<p>Last updated on 2025-08-25 |

        <a href="https://github.com/QuTech-Delft/qmi-course/edit/main/episodes/what_is_qmi.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 10 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is QMI?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain what is QMI and its main features</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="what-is-qmi">What is QMI?<a class="anchor" aria-label="anchor" href="#what-is-qmi"></a>
</h2>
<hr class="half-width">
<p>QMI is a Python 3 framework for controlling laboratory equipment. It
is suitable for anything ranging from one-off scientific experiments to
robust operational setups.</p>
<p>QMI is developed by <a href="https://www.qutech.nl/" class="external-link">QuTech</a> to
support advanced physics experiments involving quantum bits. However,
other than its name and original purpose, the_re is nothing specifically
<em>quantum</em> about QMI — it is potentially useful in any environment
where monitoring and control of measurement equipment is needed. It is
also multi-platform. At QuTech, QMI is regularly used in both Linux and
Windows, and running QMI on macOS is also possible.</p>
<p>It supports <em>instruments</em> and <em>devices</em> that
encapsulate equipment under computer control. A number of instruments
are provided out of the box, and it is relatively easy to add your own.
QMI makes use of <em>tasks</em> that can encapsulate a (background)
process that needs to run temporarily or indefinitely. It offers
<em>network transparency</em>; instruments and tasks can be remotely
started, stopped, monitored and controlled. With these features it can
be used as basis for monitoring and control of complicated setups,
distributed over multiple locations.</p>
</section><section><h2 class="section-heading" id="device-drivers">Device drivers<a class="anchor" aria-label="anchor" href="#device-drivers"></a>
</h2>
<hr class="half-width">
<p>With device drivers instruments and devices can be controlled. Device
drivers are importable classes in QMI with (a selection of) functions
with which the device can be controlled and monitored. QMI has currently
device drivers for 45 manufacturers and 80 devices. In the picture below
you can see most of the supported instruments in QMI.</p>
<figure><img src="../fig/montage.png" alt="Montage of QMI drivers manufacturer and devices" class="figure mx-auto d-block"><div class="figcaption">Montage of QMI drivers manufacturer and
devices</div>
</figure></section><section><h2 class="section-heading" id="qmi-contexts">QMI contexts<a class="anchor" aria-label="anchor" href="#qmi-contexts"></a>
</h2>
<hr class="half-width">
<p>When using QMI in a Python program, a <em>context</em> is started.
While the program is running, this context contains all information
about the device drivers and tasks added in the context in the program.
One of the main features of QMI is that these contexts are also
approachable from another QMI context, and the instruments and tasks in
the context can be controlled through another context, see also Figure
1. Advantages of this are that instruments can be grouped in logical
groups in separate contexts and there is therefore no need to make one
big program that contains all the instruments, tasks and whatever logic
or timing is necessary. The programs can that way be made modular, with
easy addition or removal of contexts.</p>
<figure><img src="../fig/qmi_contexts.png" alt="Figure 1: An example of three QMI contexts where two instrument device drivers are added to QMI context 1. Then we have context 2, that runs a task, which is configured to make connection to context one, and to control the instruments in it. This second contexts now sends also out settings and status signals which can e.g. be forwarder to a database. A third context monitors the task status in context two and instrument status in context one. This context is hooked in the status signal and at specific signal values or circumstances could either tell context two to change settings or stop task, or send specific commands to the instruments in context one." class="figure mx-auto d-block"><div class="figcaption">Figure 1: An example of three QMI contexts where
two instrument device drivers are added to QMI context 1. Then we have
context 2, that runs a task, which is configured to make connection to
context one, and to control the instruments in it. This second contexts
now sends also out <em>settings</em> and <em>status</em> signals which
can e.g. be forwarder to a database. A third context monitors the task
status in context two and instrument status in context one. This context
is hooked in the <em>status</em> signal and at specific signal values or
circumstances could either tell context two to change settings or stop
task, or send specific commands to the instruments in context one.</div>
</figure></section><section><h2 class="section-heading" id="remote-procedure-calls">Remote Procedure Calls<a class="anchor" aria-label="anchor" href="#remote-procedure-calls"></a>
</h2>
<hr class="half-width">
<p>Second main feature of QMI is its Remote Procedure Call (RPC)
protocol that enables communication between computers in the same
network. The three contexts in Figure 1 could reside in three different
PCs and communicate with each other with the help of the RPC protocol
and QMI <em>signals</em>. The user only needs to setup QMI configuration
files for these contexts, where information about other contexts are
present. That way the contexts know where to look for other contexts. It
is possible to also look for contexts not defined in the configuration
files, but more about that later.</p>
</section><section><h2 class="section-heading" id="qmi-signals">QMI signals<a class="anchor" aria-label="anchor" href="#qmi-signals"></a>
</h2>
<hr class="half-width">
<p>The last main feature to mention is the QMI signals. The device
drivers and tasks can be equipped with signal publishers and receivers.
These can be used e.g. to send simple triggering signals between tasks
or devices, or to send data to some external party. They can become
handy with tasks that need to wait for some event to occur before
performing some specific action, and thus wait to receive a signal from
a publisher. Or if some data needs to be (periodically) saved to a
database, like <a href="https://www.influxdata.com/" class="external-link">InfluxDB</a> or our
own <a href="https://qutech-data-lake.gitlab.io/docs/latest/" class="external-link">Quantum
Data Lake</a>, for later analysis. The signals have been also used for
remote live monitoring by sending data to a <a href="https://grafana.com/docs/grafana/latest/" class="external-link">Grafana</a> server.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Device drivers: With device drivers instruments and devices can be
controlled</li>
<li>QMI contexts: A QMI context envelops instruments, tasks and other
RPC objects and can be connected to from outside from another QMI
context</li>
<li>Remote Procedure Calls: Custom RPC are used to control objects in
QMI contexts</li>
<li>QMI signals: QMI context objects can also broadcast and receive
signals, which can include e.g. data</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-hello_world"><p>Content from <a href="hello_world.html">'Hello World'</a></p>
<hr>
<p>Last updated on 2025-08-22 |

        <a href="https://github.com/QuTech-Delft/qmi-course/edit/main/episodes/hello_world.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 10 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How are the QMI contexts created?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Create a simple QMI context</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="hello-world-context-creation">“Hello world” context creation<a class="anchor" aria-label="anchor" href="#hello-world-context-creation"></a>
</h2>
<hr class="half-width">
<p>Start up python</p>
<pre class="shell"><code><span><span class="va">python</span></span></code></pre>
<p>We are now in an interactive Python shell. Let’s start with importing
QMI.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="im">import</span> qmi</span></code></pre>
</div>
<p>Presuming you had just installed QMI with Pip, this should just work
without any issues. Let’s continue to creating a simple context called
“hello_world”.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>qmi.start(<span class="st">"hello_world"</span>, config_file<span class="op">=</span><span class="va">None</span>)</span></code></pre>
</div>
<p>Now, your first QMI context has been started. You can verify this
with</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>qmi.context()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fu">QMI_context</span><span class="op">(</span>name<span class="op">=</span><span class="st">'hello_world'</span><span class="op">)</span></span></code></pre>
</div>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor1" aria-labelledby="headingInstructor1">
<div class="accordion-body">
<p>Also a nice info to view now is</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>qmi.info()</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>A couple of remarks are in place already here. The context name is
with underscore (_) as spaces in the context names cause issues. So,
avoid those and also special letters like ‘!’, ‘@’, ‘#’, ‘$’ etc. We
also gave a second input parameter <code>config_file=None</code> for the
call. This was actually optional as the default value for the parameter
is <code>None</code>, but we wanted to illustrate with this that we
start a context without specifying a QMI configuration file. In that
case, QMI will create a simple configuration for the context. Now just
let’s stop the “hello_world” context.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>qmi.stop()</span></code></pre>
</div>
<p>We can confirm that the context has been stopped</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>qmi.info()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="st">'*** No active QMI context ***'</span></span></code></pre>
</div>
<p>And trying to a command like <code>qmi.context()</code> now will give
an exception. Note that it is important always to stop your contexts.
Python does not always manage to clean up the QMI contexts properly,
especially when the context has plenty of things going on, if the
context is not manually stopped before. This can leave bogus QMI
contexts running on your system with e.g. some kind of task or
instrument control active.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>A QMI context is created using
<code>qmi.start("&lt;context_name&gt;")</code> call</li>
<li>Always remember to stop the context with
<code>qmi.stop()</code>
</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-one_instrument_control"><p>Content from <a href="one_instrument_control.html">Controlling an instrument</a></p>
<hr>
<p>Last updated on 2025-08-25 |

        <a href="https://github.com/QuTech-Delft/qmi-course/edit/main/episodes/one_instrument_control.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 15 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I control an instrument?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Add an instrument into a QMI context and control it with RPC
commands</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="using-qmi-to-control-one-instrument">Using QMI to control one instrument<a class="anchor" aria-label="anchor" href="#using-qmi-to-control-one-instrument"></a>
</h2>
<hr class="half-width">
<p>In this example we show how to create an instrument object in a
context. For this, we have a dummy instrument in the QMI instruments to
illustrate. See also the QMI readthedocs documentation about the dummy
instrument class call interface. Let’s import the device driver.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="im">from</span> qmi.instruments.dummy.noisy_sine_generator <span class="im">import</span> NoisySineGenerator</span></code></pre>
</div>
<p>So we imported the QMI device driver class called
<code>NoisySineGenerator</code> from QMI instrument “manufacturer”
<code>dummy</code> and device <code>noisy_sine_generator</code> module.
To use this, we start a new QMI context and “make” an instrument object
from the device driver.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>qmi.start(<span class="st">"nsg_demo"</span>, <span class="va">None</span>)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>nsg <span class="op">=</span> qmi.make_instrument(<span class="st">"nsg"</span>, NoisySineGenerator)</span></code></pre>
</div>
<p>Now we have an instrument object <code>nsg</code> present in Python.
The instrument is also added into the context. This can be checked
with:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>qmi.show_instruments()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>address       type
------------  ------------------
nsg_demo.nsg  NoisySineGenerator
------------  ------------------</code></pre>
</div>
<p>The address “nsg_demo.nsg” means that now there is an instrument
object “nsg” present in context “nsg_demo”. The type confirms the
instrument object is of expected class type. Alternative way to confirm
this is simply to type the object in Python.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>nsg</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;rpc proxy for nsg_demo.nsg (qmi.instruments.dummy.noisy_sine_generator.NoisySineGenerator)&gt;</code></pre>
</div>
<p>As can be seen, the created object is actually an RPC proxy of the
actual instrument object. This has a couple of consequences: The first
is that the proxy object can be now shared through the context with
other contexts, allowing remote control of the instrument. The second is
that the proxy object does not have the full class interface of the
device driver, but only the variables that are present in QMI proxy
class and functions that have been selected to be RPC callable. We can
list the variables of the object with</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="bu">help</span>(nsg)</span></code></pre>
</div>
<p>It prints out the class docstring, a listing of its callable RPC
methods, signals and class constants.</p>
<p>Here are useful information, like the docstring which is the
documentation string of the class object. Then all entries listed as
“RPC methods” are the callable RPC functions of the object, with their
expected input parameters and return value type. A few methods related
to the proxy locking (<code>lock</code>, <code>unlock</code>,
<code>is_locked</code> and <code>force unlock</code> are not present,
though. We also won’t handle these methods in the course, but you can
have a look at the <a href="https://qmi.readthedocs.io/en/latest/tutorial.html#locking-an-instrument" class="external-link">tutorial</a>.
You see also empty listings “signals” and “constants”, but for this
instrument class there are none present.</p>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor1" aria-labelledby="headingInstructor1">
<div class="accordion-body">
<p>A bit shorter listing of the attributes of the object, you can
use</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="bu">dir</span>(nsg)</span></code></pre>
</div>
<p>but it is not easy to read and has also internal and non-RPC variable
and callable methods present.</p>
<p>You can also get “help” of any method present. Try:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="bu">help</span>(nsg.get_sample)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Anyhow, in the printed out listing, a lot of useful methods are
present and supported through the proxy. Let’s try one:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>nsg.get_sample()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">96.18801232566346</span></span></code></pre>
</div>
<p>So we get returned one sample of the sine wave at a random moment.
Let’s do for demonstration purpose a little for loop print out the sine
wave of our generator “instrument”:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1000</span>):</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">" "</span> <span class="op">*</span> <span class="bu">int</span>(<span class="fl">40.0</span> <span class="op">+</span> <span class="fl">0.25</span> <span class="op">*</span> nsg.get_sample()) <span class="op">+</span> <span class="st">"*"</span>)</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>    time.sleep(<span class="fl">0.01</span>)</span></code></pre>
</div>
<p>Nice huh? Let’s then close this context with <code>qmi.stop()</code>
and exit Python with <code>exit()</code>and prepare for next
example.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Instruments can be added into contexts with
<code>&lt;instrument_object&gt; = qmi.make_instrument("&lt;name&gt;", &lt;ClassName&gt;, &lt;possible_extra_parameters&gt;)</code>
</li>
<li>Instrument class description can be seen with
<code>help(&lt;instrument_object&gt;)</code>
</li>
<li>Detailed information about the object and available variables and
RPC methods can be obtained with
<code>vars(&lt;instrument_object&gt;)</code> and
<code>dir(&lt;instrument_object&gt;)</code>
</li>
<li>The returned instrument object is an RPC <em>proxy</em> object of
the actual class object</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-qmi_configuration"><p>Content from <a href="qmi_configuration.html">Configuring and logging</a></p>
<hr>
<p>Last updated on 2025-08-22 |

        <a href="https://github.com/QuTech-Delft/qmi-course/edit/main/episodes/qmi_configuration.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 10 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What are QMI configuration and log files?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Know how to create a basic configuration file.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="qmi-configuration-and-log-file">QMI Configuration and log file<a class="anchor" aria-label="anchor" href="#qmi-configuration-and-log-file"></a>
</h2>
<hr class="half-width">
<p>Many aspects of QMI are configurable via a <em>configuration
file</em>. The syntax of this file is very similar to <a href="https://www.json.org/" class="external-link">JSON</a>, but unlike JSON, the
configuration file may contain comments starting with a # character. By
default, QMI attempts to read the configuration from a file named
<code>qmi.conf</code> in the home directory (i.e. ‘/home/<user_profile>’
in Linux or ‘C:&lt;user_name&gt;’ folder on Windows). If you want to use
a different file name or location, you can specify the configuration
file path either as the second argument of <code>qmi.start()</code> or
in the environment variable <code>QMI_CONFIG</code>. Let’s create a
configuration file <code>qmi.conf</code> at home directory with the
following contents:</user_profile></p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">JSON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode json" tabindex="0"><code class="sourceCode json"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>    <span class="er">#</span> <span class="er">Log</span> <span class="er">level</span> <span class="er">for</span> <span class="er">messages</span> <span class="er">to</span> <span class="er">the</span> <span class="er">console.</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>    <span class="dt">"logging"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>        <span class="dt">"console_loglevel"</span><span class="fu">:</span> <span class="st">"INFO"</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="fu">}</span></span></code></pre>
</div>
<p>This configuration file changes the log level for messages that
appear on your terminal. By default, QMI prints only warnings and error
messages. Our new configuration also enables printing of informational
messages. For further details about logging options, see documentation
on <a href="https://qmi.readthedocs.io/en/latest/build/qmi.core.logging_init.html#module-qmi.core.logging_init" class="external-link">qmi.core.logging_init</a>
module. Test the new configuration file in a new Python session:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="im">import</span> qmi</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>qmi.start(<span class="st">"hello_world"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>qmi.stop()</span></code></pre>
</div>
<p>Notice that we do not pass a ‘None’ as the second argument to
<code>qmi.start()</code>. As a result, QMI will try to read the
configuration file from its default location. If the configuration file
is found and written correctly, QMI should print a bunch of log messages
after the call to <code>qmi.start()</code>. If your configuration file
is not in the default location, you may have to specify its location
with the <code>config_file=</code> argument to <code>qmi.start()</code>.
At your home directory should also now be a file called
<code>qmi.log</code>. The file works as a log for QMI programs. You will
find in this file a log of actions you took until now while testing your
first examples. The logging can be disabled by giving input parameter
<code>init_logging=False</code> for <code>qmi.start()</code>. We will
add more settings to the configuration file as we progress through this
tutorial.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>
<code>qmi.conf</code> has a JSON-like structure</li>
<li>Log levels are set within “logging” keyword section</li>
<li>Default name and location of the log file are <code>qmi.log</code>
and the user’s home directory</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-accessing_a_remote_instrument"><p>Content from <a href="accessing_a_remote_instrument.html">Accessing an instrument remotely</a></p>
<hr>
<p>Last updated on 2025-08-22 |

        <a href="https://github.com/QuTech-Delft/qmi-course/edit/main/episodes/accessing_a_remote_instrument.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 15 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can we access the instruments remotely?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn to connect between QMI contexts and control instruments over
contexts</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="accessing-a-remote-instrument">Accessing a remote instrument<a class="anchor" aria-label="anchor" href="#accessing-a-remote-instrument"></a>
</h2>
<hr class="half-width">
<p>QMI makes it easy to access an instrument instance that exists in
another Python program. The programs may even run on different
computers. The Python program that contains the instrument instance must
be accessible via the network. This can be achieved by extending the QMI
configuration file. The new file will look as follows:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">JSON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode json" tabindex="0"><code class="sourceCode json"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>    <span class="er">#</span> <span class="er">Log</span> <span class="er">level</span> <span class="er">for</span> <span class="er">messages</span> <span class="er">to</span> <span class="er">the</span> <span class="er">console.</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>    <span class="dt">"logging"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>        <span class="dt">"console_loglevel"</span><span class="fu">:</span> <span class="st">"INFO"</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>    <span class="dt">"contexts"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>        <span class="er">#</span> <span class="er">Testing</span> <span class="er">remote</span> <span class="er">instrument</span> <span class="er">access.</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>        <span class="dt">"instr_server"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>            <span class="dt">"host"</span><span class="fu">:</span> <span class="st">"127.0.0.1"</span><span class="fu">,</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>            <span class="dt">"tcp_server_port"</span><span class="fu">:</span> <span class="dv">40001</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="fu">}</span></span></code></pre>
</div>
<p>Note that JSON is very picky about the use of commas. There must be a
comma between multiple elements in the same group, but there may not be
a comma after the last element of a group.</p>
<p>Start the instrument server with the following lines:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="im">from</span> qmi.instruments.dummy.noisy_sine_generator <span class="im">import</span> NoisySineGenerator</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>qmi.start(<span class="st">"instr_server"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>nsg <span class="op">=</span> qmi.make_instrument(<span class="st">"nsg"</span>, NoisySineGenerator)</span></code></pre>
</div>
<p>Because the name of the context instr_server matches the name
specified in the configuration file, QMI opens a TCP server port for
this context. Check that the reading of configuration file succeeded by
calling <code>qmi.context().get_context_config()</code>. In the response
string, the <code>host</code> and <code>tcp_server_port</code> values
should be the same as in the configuration file. If this is not the
case, stop the context, and start it again providing the
<code>qmi.conf</code> file path with the <code>config_file</code>
parameter. Then try again to confirm the host and port. Other Python
programs can now connect to this port to access the sine generator.</p>
<p>To try this, leave the instrument server session running and start
another Python session in a separate terminal window:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="im">import</span> qmi</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>qmi.start(<span class="st">"random_client"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>qmi.context().connect_to_peer(<span class="st">"instr_server"</span>)</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>nsg <span class="op">=</span> qmi.get_instrument(<span class="st">"instr_server.nsg"</span>)</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>nsg.get_sample()</span></code></pre>
</div>
<blockquote>
<p>NOTE: With Windows, the <code>connect_to_peer</code> also requires
explicit input of the context address. You can check the address by
calling <code>qmi.show_network_contexts()</code>. Then give the whole
address as second parameter in the call with
<code>peer_address=&lt;the_address&gt;</code>. If the connecting now
went without an exception, everything should be now OK. You can confirm
this by calling again <code>qmi.show_network_contexts()</code>and see
that the ‘connected’ column has now changed to ‘yes’. Then proceed to
get the instrument and a sample.</p>
</blockquote>
<blockquote>
<p>NOTE 2: <code>peer_address=”127.0.0.1:40001”</code> also works as the
‘localhost’ address changes into the IPv4 address in the background.
This exercise demonstrated how the second Python program is able to
access the <code>NoisySineGenerator</code> instance proxy that exists
within the first Python program (and QMI context within it). To do this,
the QMI context of the second program connects to the “instr_server”
context via TCP. Behind the scenes, the two contexts exchange messages
through this connection to arrange for the method
<code>get_sample()</code> to be called in the real instrument instance
through the proxy, and the answer to be sent back to the calling proxy
in the second program.</p>
</blockquote>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Instruments to be accessed remotely should be defined in
`qmi.conf</li>
<li>Connect to another QMI context using
<code>qmi.context().connect_to_peer("&lt;context_name&gt;", peer_address="&lt;ho.st.i.p:port&gt;")</code>
</li>
<li>Obtain remote instrument control with
<code>qmi.get_instrument("&lt;context_name&gt;.&lt;instrument_name&gt;")</code>
</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-tasks_and_service"><p>Content from <a href="tasks_and_service.html">Create a task and a 'service'</a></p>
<hr>
<p>Last updated on 2025-08-22 |

        <a href="https://github.com/QuTech-Delft/qmi-course/edit/main/episodes/tasks_and_service.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 30 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What are tasks and what can they do?</li>
<li>Can I run a task as a (background) ‘service’ process?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn how to create tasks with (customized) task runners</li>
<li>Learn how to make a background ‘service’ process with
<code>qmi_proc</code>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="setting-up-a-task-and-a-service">Setting up a task and a “service”<a class="anchor" aria-label="anchor" href="#setting-up-a-task-and-a-service"></a>
</h2>
<hr class="half-width">
<p>Next, we want to demonstrate QMI tasks and how they can be used in
setting up services, i.e. tasks running as background processes, on your
PC. This needs now somewhat more complex configuration of the
<code>qmi.conf</code>, but nothing scary, I promise.</p>
<div class="section level3">
<h3 id="configuration-file">Configuration file<a class="anchor" aria-label="anchor" href="#configuration-file"></a>
</h3>
<p>The new configuration will have an extension for the background
process:</p>
<pre><code>{
    # Log level for messages to the console.
    "logging": {
        "console_loglevel": "INFO"
    },
    "contexts": {
        # Testing remote instrument access.
        "instr_server": {
            "host": "127.0.0.1",
            "tcp_server_port": 40001
        },
        # Testing process management.
        "proc_demo": {
            "host": "127.0.0.1",
            "tcp_server_port": 40002,
            "enabled": true,
            "program_module": "task_demo "
        }
    }
}</code></pre>
<p>The ‘”enabled”: true’ parameter makes it possible to start the
context via QMI process management, and ‘”program_module”: “task_demo”’
line tells the QMI to start a module named ‘task_demo.py’ for this
process. We’ll create it in a qubit, but first let’s define a task we
want to make the service for.</p>
</div>
<div class="section level3">
<h3 id="demo-task">Demo task<a class="anchor" aria-label="anchor" href="#demo-task"></a>
</h3>
<p>To demonstrate a custom task, we need to create one. Make a new
Python module inside the module path for your project. If you don’t have
a module path yet, just create a file <code>demo_task.py</code> in the
current directory:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="im">from</span> dataclasses <span class="im">import</span> dataclass</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="im">import</span> logging</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="im">import</span> qmi</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="im">from</span> qmi.core.rpc <span class="im">import</span> rpc_method</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="im">from</span> qmi.core.task <span class="im">import</span> QMI_Task, QMI_TaskRunner</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="co"># Global variable holding the logger for this module.</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>_logger <span class="op">=</span> logging.getLogger(<span class="va">__name__</span>)</span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="at">@dataclass</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="kw">class</span> DemoLoopTaskSettings:</span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a>    sample: <span class="bu">float</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a>    amplitude: <span class="bu">float</span></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a><span class="kw">class</span> CustomRpcControlTaskRunner(QMI_TaskRunner):</span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a>    <span class="at">@rpc_method</span></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a>    <span class="kw">def</span> set_amplitude(<span class="va">self</span>, amplitude: <span class="bu">float</span>):</span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a>        settings <span class="op">=</span> <span class="va">self</span>.get_settings()</span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a>        settings.amplitude <span class="op">=</span> amplitude</span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a>        <span class="va">self</span>.set_settings(settings)</span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a></span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a></span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a><span class="kw">class</span> DemoRpcControlTask(QMI_Task):</span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, task_runner, name):</span>
<span id="cb2-28"><a href="#cb2-28" tabindex="-1"></a>        <span class="bu">super</span>().<span class="fu">__init__</span>(task_runner, name)</span>
<span id="cb2-29"><a href="#cb2-29" tabindex="-1"></a>        <span class="va">self</span>.settings <span class="op">=</span> DemoLoopTaskSettings(amplitude<span class="op">=</span><span class="fl">100.0</span>, sample<span class="op">=</span><span class="va">None</span>)</span>
<span id="cb2-30"><a href="#cb2-30" tabindex="-1"></a></span>
<span id="cb2-31"><a href="#cb2-31" tabindex="-1"></a>    <span class="kw">def</span> run(<span class="va">self</span>):</span>
<span id="cb2-32"><a href="#cb2-32" tabindex="-1"></a>        _logger.info(<span class="st">"starting the background task"</span>)</span>
<span id="cb2-33"><a href="#cb2-33" tabindex="-1"></a>        nsg <span class="op">=</span> qmi.get_instrument(<span class="st">"proc_demo.nsg"</span>)</span>
<span id="cb2-34"><a href="#cb2-34" tabindex="-1"></a>        <span class="cf">while</span> <span class="kw">not</span> <span class="va">self</span>.stop_requested():</span>
<span id="cb2-35"><a href="#cb2-35" tabindex="-1"></a>            <span class="va">self</span>.update_settings()</span>
<span id="cb2-36"><a href="#cb2-36" tabindex="-1"></a>            nsg.set_amplitude(<span class="va">self</span>.settings.amplitude)</span>
<span id="cb2-37"><a href="#cb2-37" tabindex="-1"></a>            <span class="va">self</span>.sleep(<span class="fl">0.01</span>)</span>
<span id="cb2-38"><a href="#cb2-38" tabindex="-1"></a></span>
<span id="cb2-39"><a href="#cb2-39" tabindex="-1"></a>        _logger.info(<span class="st">"stopping the background task"</span>)</span></code></pre>
</div>
<p>Note that we define class <code>DemoRpcControlTask</code> with one
special method named <code>run()</code>. This method contains the code
that makes up the background task. In this simple example, the task
simply loops once per second, reading settings from the sine generator
and adjusting its amplitude. The task uses the function <a href="https://qmi.readthedocs.io/en/latest/build/qmi.core.task.html#qmi.core.task.QMI_Task.sleep" class="external-link"><code>qmi.core.task.QMI_Task.sleep()</code></a>
to sleep instead of <code>time.sleep()</code>. The advantage of this is
that it stops waiting immediately when it is necessary to stop the
task.</p>
</div>
<div class="section level3">
<h3 id="task-runner-script">Task runner script<a class="anchor" aria-label="anchor" href="#task-runner-script"></a>
</h3>
<p>Now we still miss the program starting up and running the task. Make
the <code>task_demo.py</code> file with the following contents:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="im">import</span> logging</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="im">import</span> qmi</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="im">from</span> qmi.utils.context_managers <span class="im">import</span> start_stop</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="im">from</span> qmi.instruments.dummy.noisy_sine_generator <span class="im">import</span> NoisySineGenerator</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="im">from</span> demo_task <span class="im">import</span> DemoRpcControlTask, CustomRpcControlTaskRunner</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="co"># Global variable holding the logger for this module.</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>_logger <span class="op">=</span> logging.getLogger(<span class="va">__name__</span>)</span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="kw">def</span> main():</span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a>    <span class="cf">with</span> start_stop(qmi, <span class="st">"proc_demo"</span>, config_file<span class="op">=</span><span class="st">"./qmi.conf"</span>):</span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a>        ctx <span class="op">=</span> qmi.context()</span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a>        <span class="cf">with</span> qmi.make_instrument(<span class="st">"nsg"</span>, NoisySineGenerator) <span class="im">as</span> nsg:</span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a>            <span class="cf">with</span> qmi.make_task(<span class="st">"demo_task"</span>, DemoRpcControlTask, task_runner<span class="op">=</span>CustomRpcControlTaskRunner) <span class="im">as</span> task:</span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a>                _logger.info(<span class="st">"the task has been started"</span>)</span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a>                <span class="cf">while</span> <span class="kw">not</span> ctx.shutdown_requested():</span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a>                    sample <span class="op">=</span> nsg.get_sample()</span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a>                    amplitude <span class="op">=</span> nsg.get_amplitude()</span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a>                    <span class="bu">print</span>(<span class="st">" "</span> <span class="op">*</span> <span class="bu">int</span>(<span class="fl">40.0</span> <span class="op">+</span> <span class="fl">0.25</span> <span class="op">*</span> sample) <span class="op">+</span> <span class="st">"*"</span>)</span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a>                    <span class="cf">if</span> <span class="bu">abs</span>(sample) <span class="op">&gt;</span> <span class="dv">10</span>:</span>
<span id="cb3-23"><a href="#cb3-23" tabindex="-1"></a>                        task.set_amplitude(amplitude <span class="op">*</span> <span class="fl">0.9</span>)</span>
<span id="cb3-24"><a href="#cb3-24" tabindex="-1"></a>                    <span class="cf">else</span>:</span>
<span id="cb3-25"><a href="#cb3-25" tabindex="-1"></a>                        task.set_amplitude(amplitude <span class="op">*</span> <span class="fl">1.1</span>)</span>
<span id="cb3-26"><a href="#cb3-26" tabindex="-1"></a></span>
<span id="cb3-27"><a href="#cb3-27" tabindex="-1"></a>                    time.sleep(<span class="fl">0.01</span>)</span>
<span id="cb3-28"><a href="#cb3-28" tabindex="-1"></a></span>
<span id="cb3-29"><a href="#cb3-29" tabindex="-1"></a>            _logger.info(<span class="st">"the task has been stopped"</span>)</span>
<span id="cb3-30"><a href="#cb3-30" tabindex="-1"></a></span>
<span id="cb3-31"><a href="#cb3-31" tabindex="-1"></a></span>
<span id="cb3-32"><a href="#cb3-32" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">"__main__"</span>:</span>
<span id="cb3-33"><a href="#cb3-33" tabindex="-1"></a>    main()</span></code></pre>
</div>
<p>This program now takes care of creating the instrument
<code>nsg</code> and followingly starting up the task. The script also
loops about once per second, and at each iteration prints out the latest
sample and amplitude values, and controls the
<code>DemoRpcControlTask</code>’s amplitude to keep the sample value at
around 10. In practice, we are now trying to suppress the sine wave as
much as possible by continuously controlling its amplitude.</p>
</div>
<div class="section level3">
<h3 id="running-the-task-as-a-service">Running the task as a service<a class="anchor" aria-label="anchor" href="#running-the-task-as-a-service"></a>
</h3>
<p>We can now start the service using <code>qmi_proc</code> program.
<code>qmi_proc</code> is a command-line executable created when
installing QMI, see also documentation about <a href="https://qmi.readthedocs.io/en/latest/tutorial.html%23managing-background-processes" class="external-link">managing
background processes</a>. It can be used to start, stop and inquire
status of services. To start the “proc_demo” service, type the following
(the “–config ./qmi.conf” is not necessary if the <code>qmi.conf</code>
is in the default path).</p>
<pre class="shell"><code>qmi_proc start proc_demo --config ./qmi.conf</code></pre>
<p>Leave the program now to run a few seconds and then stop it:</p>
<pre class="shell"><code>qmi_proc stop proc_demo --config ./qmi.conf</code></pre>
<p>The use of the <code>qmi_proc</code> creates extra output files for
services. One was now created also for “proc_demo” service. You can find
it in the default location with name “proc_demo_<date>_<time>.out”.
Opening this file, after a few info statements, you’ll see again the
sine wave starting, like in the earlier example. Only now, it’ll quickly
loose amplitude and become a very slightly wavy sine line. If you see
that to happen, the service did it’s job.</time></date></p>
<p>There are plenty of other things going on on this example, like the
use of a custom <code>QMI_TaskRunner</code> with an RPC method added
into the runner. We also make use of file-specific loggers for logging.
For more information about QMI tasks see the <a href="https://qmi.readthedocs.io/en/latest/tutorial.html#making-a-qmi-task" class="external-link">tutorial</a>,
and about logging the <a href="https://qmi.readthedocs.io/en/latest/design.html#logging" class="external-link">Design
Overview</a> in documentation. There are also other examples of tasks in
the <code>examples</code> folder of the QMI repository.</p>
<p>Further, the amplitude control through the task settings actually
utilizes the QMI’s signalling feature. For more details on this, you can
read into <a href="https://qmi.readthedocs.io/en/latest/design.html#signalling" class="external-link">signalling</a>
and look at API of <a href="https://qmi.readthedocs.io/en/latest/build/qmi.core.task.html#module-qmi.core.task" class="external-link">qmi.core.task</a>
in the documentation.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Instruments to be accessed remotely should be defined in
`qmi.conf</li>
<li>Connect to another QMI context using
<code>qmi.context().connect_to_peer("&lt;context_name&gt;", peer_address="&lt;ho.st.i.p:port&gt;")</code>
</li>
<li>Obtain remote instrument control with
<code>qmi.get_instrument("&lt;context_name&gt;.&lt;instrument_name&gt;")</code>
</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</section></section><section id="aio-open-source_vs_internal"><p>Content from <a href="open-source_vs_internal.html">Open-source vs internal code</a></p>
<hr>
<p>Last updated on 2025-08-25 |

        <a href="https://github.com/QuTech-Delft/qmi-course/edit/main/episodes/open-source_vs_internal.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 10 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is the difference between different QMI codebases?</li>
<li>How is the development done for QMI software?</li>
<li>Can I make requests and|or contribute?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Know what is the difference between the open-source and internal
QMI</li>
<li>Know how to make requests and how to contribute to the
development</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="qmi-open-source-vs-internal-code">QMI open-source vs internal code<a class="anchor" aria-label="anchor" href="#qmi-open-source-vs-internal-code"></a>
</h2>
<hr class="half-width">
<p>QMI has its main development as an open-source software (OSS). But it
has also a close-source version (CSS) for development mainly due to
licensing reasons as QMI uses also some manufacturer software and
libraries. Also for some projects it might be preferable to keep certain
aspects out of plain sight during their course. The software can be
found in - OSS: <a href="https://github.com/QuTech-Delft/QMI" class="external-link uri">https://github.com/QuTech-Delft/QMI</a> (public) - CSS: <a href="https://gitlab.tudelft.nl/qmi/qmi" class="external-link uri">https://gitlab.tudelft.nl/qmi/qmi</a> (private, you need to
be invited to access) repositories.</p>
</section><section><h2 class="section-heading" id="code-base-and-development">Code base and development<a class="anchor" aria-label="anchor" href="#code-base-and-development"></a>
</h2>
<hr class="half-width">
<p>By browsing the repositories from the links above (if you have access
for both), you can get familiar with the code base of both projects. You
will see things on the site like “Issues” or “Pull requests” (Github) |
“Merge requests” (Gitlab) and “Issue Board” (Gitlab) among others. The
development is done normally by tackling the “Issues”. We can call them
as “Issue tickets” or just “tickets” as well.</p>
<figure><img src="../fig/Github_issue_list.png" alt="Figure 2: An issue list in Github." class="figure mx-auto d-block"><div class="figcaption">Figure 2: An issue list in Github.</div>
</figure><p>The use of such issue list is that we want to have more traceable and
logical system for the development. If a developer or user notices a bug
or another issue with the code, or would like to have new features or
functionalities, it is best to describe it (as well as possible) in an
issue ticket, instead of immediately starting to bash through some
changes in the code and try to push that through in the code base. In
any case where there is more than one person involved in the code base
(and usually even for the lone wolf developer) this is a good idea to
prevent too eager contributors messing up the code.</p>
<div class="section level3">
<h3 id="creating-a-new-issue-ticket">Creating a new issue ticket<a class="anchor" aria-label="anchor" href="#creating-a-new-issue-ticket"></a>
</h3>
<p>To avoid the “writer’s block” when creating a new ticket, templates
are available for different ticket types. The templates have a structure
ready and a description what should be written in different parts of the
ticket. The templates do not need to be written 100% full if some parts
are not applicable, though. Use your judgement also. In general applies:
The more detailed request with clear description of the desired outcome,
perhaps even with a little bit of (meta)code, the easier the ticket is
to evaluate and execute, and eventual pull|merge request reviewed.
Another common pitfall to avoid is to make too large tickets. If the new
feature request starts to get really complex, perhaps it is better to
think how it can be split into two or more smaller tickets, with clear
reachable goals for each ticket, which together then fulfill the
request. This might also be done during the evaluation of the issue, see
below the description of ticket progress in QMI.</p>
</div>
<div class="section level3">
<h3 id="tracking-issue-progress-on-a-board">Tracking issue progress on a board<a class="anchor" aria-label="anchor" href="#tracking-issue-progress-on-a-board"></a>
</h3>
<p>A ticket progress can be followed on a issue board. A board consists
of at least “new” or “open” column and “done” or “closed” columns. In
between there can be several other columns to keep track of the ticket
progress, like “refinement”, “in progress”, “for review” and others.
Below is an example of QMI OSS (private) issue development board.</p>
<figure><img src="../fig/Github_devboard.png" alt="Figure 3: QMI issue development board." class="figure mx-auto d-block"><div class="figcaption">Figure 3: QMI issue development board.</div>
</figure><p>The general progress order is from left to right, where first new
issues are made in the first column. If the ticket is written clear and
concise enough, it can be moved to be evaluated by the team in “To
poker” column. Here, the ticket is “pokered” to have an effort score and
can then be then moved to “Backlog” column to wait someone to start
working on the issue. Or directly to “In progress” if the issue is going
to be worked on straight away. In the code base a new branch is opened
(usually from main branch for the repository) to work on the ticket.
When the ticket is ready, a pull|merge request is made for the request
and the ticket is moved into the “In review” column. Another developer
must review the ticket and accept it before the new code in the new
branch can be merged. After the code is merged back to its origin, the
issue can be moved into the “Pending release” column. When ‘enough’
(term is relative here) issues are in this column, a new release of the
code can be made and finally the ticket is moved into “Done”.</p>
<p>We can also move tickets back to left, e.g. if the issue description
is not proper for “pokering”, we can send it back to “New issues” to
indicate better description is needed. Sometimes, the issue is so large
that tackling it in one ticket becomes way too cumbersome. Then
splitting it into several smaller new issues is necessary. Quite often
also tickets “In review” do not get accepted with extra work needed on
the ticket, often the ticket being moved back to “In progress”.</p>
<p>A specialty if the board in Figure 3 is the “Epics” column. This
column has issue tickets that are actually descriptions of a large
feature request or larger changes in the code base. The Epic ticket
describes what is the total goal and how to reach it taking smaller
steps, i.o.w. by executing several smaller issue tickets. The
aforementioned splitting of a large ticket during evaluation could also
result into creation of such Epic issue so that the overall progress,
which could span even over multiple releases, can be tracked better.</p>
<p>Now you will be showcased how to make a ticket on a board and how to
select a template for it.</p>
</div>
</section><section><h2 class="section-heading" id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h2>
<hr class="half-width">
<p>The users can also pick up their own tickets and develop code in
their own branches, and offer them for merging, too! Such contributions
are more than welcome as there’s not too many dedicated SW engineers for
development. For QMI, we do aim to keep a certain coding style and have
some quality requirements for any contribution. QMI coding standard is
explained <a href="https://qmi.readthedocs.io/en/latest/coding_standard.html" class="external-link">here</a>
and a simple guide on how to proceed is <a href="https://github.com/QuTech-Delft/QMI/blob/main/CONTRIBUTING.md#development" class="external-link">here</a>.
Note that just delivering code for the bug fix or requested feature is
not enough: the code must include also unit-tests and pass the
CI-pipelines, fulfilling our <a href="https://github.com/QuTech-Delft/QMI/blob/main/TESTING.md%23acceptance-criteria" class="external-link">acceptance
criteria</a>. Only then the pull|merge request can be approved and
merged. Other valuable points for <a href="https://qutech-delft.github.io/imsep/clean-code.html" class="external-link">good coding
practices</a> were mentioned in the IMSEP course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>In Github we have open-source QMI and in Gitlab the internal
closed-source QMI</li>
<li>Users can make requests via opening new issues a.k.a. tickets in the
repository</li>
<li>You can and are welcome to contribute too! Just follow the
guidelines</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-mypy"><p>Content from <a href="mypy.html">Good coding practises: MyPy</a></p>
<hr>
<p>Last updated on 2025-08-22 |

        <a href="https://github.com/QuTech-Delft/qmi-course/edit/main/episodes/mypy.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 20 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is MyPy and why is it used?</li>
<li>How do I code such that MyPy pipelines pass?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn to code taking into account MyPy typing requirements</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="mypy">MyPy<a class="anchor" aria-label="anchor" href="#mypy"></a>
</h2>
<hr class="half-width">
<p>In the IMSEP course some <a href="https://qutech-delft.github.io/imsep/clean-code.html#clean-code-tools" class="external-link">clean
code tools</a>, which are also employed for QMI, are explained, like
PyLint and Coverage. Another common tool we employ, not mentioned in the
course, is <a href="https://mypy-lang.org/" class="external-link">MyPy</a>. One of the factors
that make Python easier to start with coding, compared to e.g. C/C++
code is that the <em>type</em> of a variable does not need to be
declared. Like, when we declare a variable that should be a floating
point number in C, the variable can really be assigned only with a
floating point number and nothing else. Trying to give it an integer
value will result in an error. Python doesn’t care and lets you do it.
While it gives flexibility (floating points and integers are both
numbers, right?), it also poses danger. What if the variable
accidentally is a string “1.5”, if for example read from a file? This
certainly will raise an error when trying to do mathematical operations
with it.</p>
<p>Using typing together with an advanced IDE, like PyCharm, can notice
this kind issues and warn you in the editor: If the return type of the
value read from a file is typed as a <em>string</em> while your variable
you read it into is typed as <em>float</em>, the editor will notice this
and warn you with a squiggly line under it or some other way. But, it
doesn’t force you to fix it. While checking the code with MyPy will
raise an error for this line of code telling you to fix the problem. The
QMI’s CI pipeline for the code pushed into the repository won’t pass
before the issue is fixed – and also does not let the code to be allowed
to be merged back to origin.</p>
<p>This whole MyPy check might feel as an unnecessary nuisance at start,
but when the code base gets larger and also the code includes all
colours and flavours of variable types, even some really exotic ones,
the typing can save you from making hard-to-trace bugs already before
committing the code back to the repository. To be really honest,
probably every developer does see the advantage of MyPy and at the same
time be annoyed by it. MyPy also evolves over time and it often happens
that a typing construction made years ago, which passed any MyPy check
without issues, suddenly stops passing after a new MyPy version release.
These can sometimes lead into lengthy problem-solving issue tickets, but
just keep thinking it is for the greater good…</p>
<p>Modern typing with built-in classes is simple and out-of-the-box:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>fraction: <span class="bu">float</span> <span class="op">=</span> <span class="fl">0.92</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>eggs: <span class="bu">int</span> <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>colour: <span class="bu">str</span> <span class="op">=</span> “blue”</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>guests: <span class="bu">list</span>[<span class="bu">str</span>] <span class="op">=</span> [“Charly”, “Douwe”, “Ebat”]</span></code></pre>
</div>
<p>Functions should be typed too:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="kw">def</span> summer_fun(a: <span class="bu">int</span> <span class="op">|</span> <span class="bu">float</span>, b: <span class="bu">int</span> <span class="op">|</span> <span class="bu">float</span>) <span class="op">-&gt;</span> <span class="bu">int</span> <span class="op">|</span> <span class="bu">float</span>:</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>    <span class="bu">sum</span> <span class="op">=</span> a <span class="op">+</span> b</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">sum</span></span></code></pre>
</div>
<p>The function <code>summer_fun</code> expects two inputs that should
be either a floating point or integer numbers. The return value is the
sum of the two and can also be either floating point or integer number.
If you have somewhere else in your code:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>a <span class="op">=</span> <span class="bu">input</span>(“Give number a: “)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>b <span class="op">=</span> <span class="bu">input</span>(“Give number b: “)</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="bu">sum</span> <span class="op">=</span> summer_fun(a, b)</span></code></pre>
</div>
<p>The user might get surprised that after giving number a as 1 and
number b as 2, the sum is 12! How did that happen? Well, the reason is
that <code>input</code> returns the given answer always as a string. And
summing two strings, like “a” and “b” is simply “ab”. So, the code works
but it does the wrong thing. But, as we have typed the
<code>summer_fun</code>, inspecting the code with an IDE that also
checks typing would give warnings here. And running a MyPy check on this
could would give an error telling that the input values “a” and “b” are
of type <em>str</em> (strings), while it expected type <em>int</em> or
<em>float</em> for them. So the error could have passed unnoticed if no
type checking was done. The solution would be to cast the
<code>input</code> values either as an <em>int</em> (will crash if a
decimal value is inputted!) or <em>float</em> before or at the function
call to <code>summer_fun</code>.</p>
<div class="Challenge">
<p>Let’s do some exercises with typing.</p>
<p>Install MyPy:</p>
<pre class="shell"><code>pip install mypy</code></pre>
<p>Create a program with following code:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="kw">def</span> summer_fun(a: <span class="bu">int</span>, b: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">int</span>:</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>    <span class="bu">sum</span> <span class="op">=</span> a <span class="op">+</span> b</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">sum</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>debts: <span class="bu">str</span> <span class="op">=</span> <span class="op">-</span><span class="fl">100.00</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>alice_has <span class="op">=</span> <span class="bu">input</span>(<span class="st">"How much money does Alice have?</span><span class="ch">\n</span><span class="st"> &gt; "</span>)</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>bob_has <span class="op">=</span> <span class="bu">input</span>(<span class="st">"How much money does Bob have?</span><span class="ch">\n</span><span class="st"> &gt; "</span>)</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>alice_and_bob_have <span class="op">=</span> summer_func(alice_has, bob_has)</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>left_sum: <span class="bu">int</span> <span class="op">=</span> debts <span class="op">+</span> alice_and_bob_have</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Alice and Bob have together </span><span class="sc">{</span>alice_and_bob_have<span class="sc">:0.2f}</span><span class="ss"> of money."</span>)</span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"They need to pay </span><span class="sc">{</span><span class="op">-</span>debts<span class="sc">:0.2f}</span><span class="ss"> money."</span>)</span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="cf">if</span> left_sum <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Alice and Bob have enough money and are left with </span><span class="sc">{</span>left_sum<span class="sc">:0.2f}</span><span class="ss"> money."</span>)</span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="cf">elif</span> left_sum <span class="op">&lt;</span> <span class="dv">0</span>:</span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Alice and Bob do not have enough money and need </span><span class="sc">{</span><span class="op">-</span>left_sum<span class="sc">:0.2f}</span><span class="ss"> more."</span>)</span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Alice and Bob have exactly enough money to pay their debts."</span>)</span></code></pre>
</div>
<p>Run MyPy check on the program</p>
<pre class="shell"><code>mypy alice_and_bob_in_debts.py</code></pre>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>mypy_exercise.py:5: error: Incompatible types in assignment (expression has type "float", variable has type "str")  [assignment]
mypy_exercise.py:8: error: Argument 1 to "summer_fun" has incompatible type "str"; expected "int"  [arg-type]
mypy_exercise.py:8: error: Argument 2 to "summer_fun" has incompatible type "str"; expected "int"  [arg-type]
mypy_exercise.py:9: error: Unsupported operand types for + ("str" and "int")  [operator]
mypy_exercise.py:11: error: Unsupported operand type for unary - ("str")  [operator]
Found 5 errors in 1 file (checked 1 source file)</code></pre>
</div>
<p>If you made the program with a nice IDE like PyCharm, probably some
squiggly lines also appear on the same lines where MyPy raised the
errors, indicating where the errors are.</p>
<blockquote>
<p>Exercise 1: Now, with the help of MyPy and/or IDE, can you identify
the issues in the code?</p>
</blockquote>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor1" aria-labelledby="headingInstructor1">
<div class="accordion-body">
<p>The MyPy output tells us the typing of variable <code>debts</code> is
wrong: it is annotated as a <em>str</em> but the value is a
<em>float</em>. The call to <code>summer_fun</code> has also problems.
This is because <code>input</code> call returns always a string. The 4th
line of Mypy error now shows that we cannot add together
<code>debts</code> and a supposed <em>int</em> return value from
<code>summer_fun</code>. The last line means that we cannot take a
‘minus’ of a string.</p>
</div>
</div>
</div>
</div>
<blockquote>
<p>Exercise 2: Now let’s assume you try to correct the issues by
changing the annotation of <code>debts</code> to <em>float</em>, and
casting the inputs to <code>summer_fun</code> as integers using
<code>alice_has = int(alice_has)</code> and
<code>bob_has = int(bob_has)</code>. You see the same amount of errors!
Why?</p>
</blockquote>
<div id="accordionInstructor2" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor2" aria-expanded="false" aria-controls="collapseInstructor2">
  <h3 class="accordion-header" id="headingInstructor2">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor2" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor2" aria-labelledby="headingInstructor2">
<div class="accordion-body">
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>mypy_exercise.py:8: error: Incompatible types in assignment (expression has type "int", variable has type "str")  [assignment]
mypy_exercise.py:9: error: Incompatible types in assignment (expression has type "int", variable has type "str")  [assignment]
mypy_exercise.py:10: error: Argument 1 to "summer_fun" has incompatible type "str"; expected "int"  [arg-type]
mypy_exercise.py:10: error: Argument 2 to "summer_fun" has incompatible type "str"; expected "int"  [arg-type]
mypy_exercise.py:11: error: Incompatible types in assignment (expression has type "float", variable has type "int")  [assignment]
Found 5 errors in 1 file (checked 1 source file)</code></pre>
</div>
<p>The variables <code>alice_has</code> and <code>bob_has</code> are
still typed as the original type, <em>str</em> even after casting.
Instead of changing the variable assignment, MyPy warns that you are
doing something potentially harmful and errors out. Therefore the
<code>summer_fun</code> input argument errors did not go away, either.
The last error is also new: Now Mypy complains that,
<code>left_sum</code> being annotated as an <em>int</em>, the sum of
<code>debts</code> and <code>alice_and_bob_have</code> will be
<em>float</em>.</p>
</div>
</div>
</div>
</div>
<p>So we realize that the casting went wrong, and that there is an issue
with typing assignment due to some values typed as <em>float</em> and
others as <em>int</em>.</p>
<blockquote>
<p>Exercise 3: OK, let’s fix this further by doing the casting directly
in the function call, without reassigning the <code>alice_has</code> and
<code>bob_has</code>. We also cast the <code>debts</code> in the
summation as an <em>int</em>. What does MyPy say now? Will the code
work?</p>
</blockquote>
<div id="accordionInstructor3" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor3" aria-expanded="false" aria-controls="collapseInstructor3">
  <h3 class="accordion-header" id="headingInstructor3">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor3" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor3" aria-labelledby="headingInstructor3">
<div class="accordion-body">
<p>Mypy says now <code>Success: no issues found in 1 source file</code>.
Also, the code will run if the user inputs whole numbers. Notably, the
print-outs also work, giving the values with two decimal accuracy like
indicated by the <code>:0.2f</code> formatter in the strings. But all is
not well here. What if you want to use a decimal value for ‘money’, like
30.1? You get an exception out:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Traceback (most recent call last):
  File "mypy_exercise.py", line 8, in &lt;module&gt;
    alice_and_bob_have = summer_fun(int(alice_has), int(bob_has))
                                    ~~~^^^^^^^^^^^
ValueError: invalid literal for int() with base 10: '30.1'</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>So, the code works, but only with whole numbers and not with
decimals. To fix this we can use the fact that Python can cast directly
to float both integer and decimal input strings. Now, cast the
<code>alice_has</code> and <code>bob_has</code> into <em>float</em>s. We
should also allow the <code>summer_fun</code> input parameters be
<em>float</em>s and return a <em>float</em> as well. Then as last step
the <code>left_sum</code> should also be typed as a <em>float</em> and
no casting of <code>debts</code> should be done.</p>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>MyPy is a tool to check <em>typing</em> in code</li>
<li>Using <em>typing</em> can reveal coding errors like mis- or double
use of same variable leading to exceptions in code execution</li>
<li>A good IDE can help to find typing issues</li>
<li>Mypy does not check typing for string formatting</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-releasing_code"><p>Content from <a href="releasing_code.html">Releasing and versioning of QMI code</a></p>
<hr>
<p>Last updated on 2025-08-22 |

        <a href="https://github.com/QuTech-Delft/qmi-course/edit/main/episodes/releasing_code.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 5 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How is QMI code released?</li>
<li>What are the differences between different types of ways to obtain
QMI?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Understanding of ways and differences QMI code is released and can
be obtained</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="releasing-released-packaged-and-stable-branchestags">Releasing, released packaged and stable branches/tags<a class="anchor" aria-label="anchor" href="#releasing-released-packaged-and-stable-branchestags"></a>
</h2>
<hr class="half-width">
<p>Finally, a little bit about the releasing of QMI code. Every now and
then, after some amount of issues have been approved and merged into
main, a new <em>stable branch</em>, <em>tag</em>, <em>release</em> and a
<em>package</em> are made. Why so many and what’s the difference? Well,
let us explain.</p>
<p>A <em>stable branch</em> is created for each release new
version-revision, like 0.49.0 (branch name <em>stable-0-49</em>). If for
some reason, later on some user, who needs to using this release
version, needs to fix a bug but not to upgrade version, the fix can be
done based on the stable branch. Now, instead of branching off from the
<em>main</em> branch, we branch off from the stable branch, and also
merge back to it. A new <em>tag</em>, <em>release</em>, and
<em>package</em> of the fix can be made with upgrading the version’s
patch number by one. In this case, the new versioning is 0.49.1. If the
fix is relevant also for the <em>main</em> branch, it can be
“cherry-picked” also there, but it might not be the case.</p>
<p>A <em>tag</em> is usually created together with a stable branch and
possible patches to it. Our naming convention for tags is
<em>v<version>.<revision>.<patch></patch></revision></version></em>, like <em>v0.49.0</em> if using
the same example as above. The <em>tag</em> is a simple snapshot of the
branch it is made in at that point in time. It is easy to check out to
return to that point in time to check how the code was. It can also be
used to revert the code to that version. But in comparison with
<em>stable branch</em>, it cannot be used for branching off or merging
to it, and no changes can be committed.</p>
<p>A <em>release</em> releases the source code as a Zip and a Gzipped
Tar files. These can be downloaded and used to install the package for
example with Pip locally. These are especially handy if no installable
<em>package</em> is available.</p>
<p>A <em>package</em> is an installable <a href="https://packaging.python.org/en/latest/tutorials/installing-packages/#source-distributions-vs-wheels" class="external-link">wheel
or equal type of file</a>, which can be used to install the software.
QMI creates a new <em>package</em> every time a new <em>tag</em> is
made, builds a <em>wheel</em> for it and uploads it to <a href="https://pypi.org/project/qmi/" class="external-link">QMI’s Pypi page</a>. From there QMI
can be installed with simply using the <code>pip install qmi</code>
command, or, if we want to install e.g. specifically version 0.49.1,
<code>pip install qmi==0.49.1</code>.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>While main version-revision development happens through the
<em>main</em> branch, also version-revision-specific development can be
done through <em>stable branches</em>
</li>
<li>User can also use <em>tags</em> as references to code at certain
point of time</li>
<li>The usual way to install QMI is using Pip and a Pypi
<em>package</em> of QMI. But, also <em>releases</em> can be downloaded
and used for the installation.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/QuTech-Delft/qmi-course/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/QuTech-Delft/qmi-course/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/QuTech-Delft/qmi-course/" class="external-link">Source</a></p>
				<p><a href="https://github.com/QuTech-Delft/qmi-course/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:h.k.ervasti@tudelft.nl">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.17.1" class="external-link">sandpaper (0.17.1)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.7" class="external-link">varnish (1.0.7)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://QuTech-Delft.github.io/qmi-course/instructor/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, QMI, course, workshop",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://QuTech-Delft.github.io/qmi-course/instructor/aio.html",
  "identifier": "https://QuTech-Delft.github.io/qmi-course/instructor/aio.html",
  "dateCreated": "2025-08-25",
  "dateModified": "2025-08-25",
  "datePublished": "2025-08-25"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

